<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# dingmark

```go
import "github.com/alswl/dingmark/cmd/dingmark"
```

## Index



# gendocs

```go
import "github.com/alswl/dingmark/cmd/gendocs"
```

## Index



# services

```go
import "github.com/alswl/dingmark/pkg/services"
```

## Index

- [func SendMarkdown\(token, secret, title, text string\) \(\*response.Response, error\)](<#SendMarkdown>)


<a name="SendMarkdown"></a>
## func [SendMarkdown](<https://github.com/alswl/dingmark/blob/master/pkg/services/send.go#L9>)

```go
func SendMarkdown(token, secret, title, text string) (*response.Response, error)
```



# version

```go
import "github.com/alswl/dingmark/pkg/version"
```

## Index

- [Variables](<#variables>)


## Variables

<a name="Version"></a>Following values should be substituted with a real value during build.

```go
var (
    // Version Unknown.
    Version = "Unknown"
    // Commit Unknown.
    Commit = "Unknown"
    // Package of notifier.
    Package = "Unknown"
)
```

# robot

```go
import "github.com/alswl/dingmark/third_party/go-ding-robot"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Robot](<#Robot>)
  - [func New\(token, secret string\) \*Robot](<#New>)
  - [func \(bot \*Robot\) Send\(message message.IMessage\) \(\*response.Response, error\)](<#Robot.Send>)


## Constants

<a name="Timeout"></a>

```go
const (
    Timeout = 5 * time.Second
)
```

## Variables

<a name="ExtendHeaders"></a>

```go
var ExtendHeaders = map[string]string{}
```

<a name="Webhook"></a>Webhook writable for CORS proxy

```go
var Webhook = "https://oapi.dingtalk.com/robot/send"
```

<a name="Robot"></a>
## type [Robot](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/robot.go#L29-L32>)



```go
type Robot struct {
    Token, Secret string
    Client        *http.Client
}
```

<a name="New"></a>
### func [New](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/robot.go#L34>)

```go
func New(token, secret string) *Robot
```



<a name="Robot.Send"></a>
### func \(\*Robot\) [Send](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/robot.go#L41>)

```go
func (bot *Robot) Send(message message.IMessage) (*response.Response, error)
```



# root

```go
import "github.com/alswl/dingmark/cmd/dingmark/root"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func NewRootCmd\(cfgFile \*string\) \*cobra.Command](<#NewRootCmd>)


## Constants

<a name="App"></a>

```go
const App = "dingmark"
```

## Variables

<a name="SendCmd"></a>

```go
var SendCmd = &cobra.Command{
    Use: "send",
    Args: func(cmd *cobra.Command, args []string) error {
        if len(args) != 2 {
            return errors.New("requires 2 argument, title and text")
        }
        token := viper.GetString("token")
        if token == "" {
            return fmt.Errorf("%s is blank", "token")
        }
        secret := viper.GetString("secret")
        if secret == "" {
            return fmt.Errorf("%s is blank", "secret")
        }
        if args[0] == "" || args[1] == "" {
            return fmt.Errorf("invalid args input")
        }
        return nil
    },
    Run: func(cmd *cobra.Command, args []string) {
        token := viper.GetString("token")
        secret := viper.GetString("secret")
        title := args[0]
        text := args[1]

        resp, err := services.SendMarkdown(token, secret, title, text)
        if err != nil {
            fmt.Println(err)
            return
        }
        fmt.Println("result:", resp.IsSuccess(), "code:", resp.GetCode(), "message:", resp.GetMessage())
    },
}
```

<a name="NewRootCmd"></a>
## func [NewRootCmd](<https://github.com/alswl/dingmark/blob/master/cmd/dingmark/root/root.go#L11>)

```go
func NewRootCmd(cfgFile *string) *cobra.Command
```



# message

```go
import "github.com/alswl/dingmark/third_party/go-ding-robot/message"
```

## Index

- [Constants](<#constants>)
- [type ActionCard](<#ActionCard>)
  - [func NewActionCard\(\) \*ActionCard](<#NewActionCard>)
  - [func \(ac \*ActionCard\) AddBtn\(btn \*ActionCardBtnBody\) \*ActionCard](<#ActionCard.AddBtn>)
  - [func \(ac \*ActionCard\) SetBtnOrientation\(orientation string\) \*ActionCard](<#ActionCard.SetBtnOrientation>)
  - [func \(ac \*ActionCard\) SetBtnTitle\(title string\) \*ActionCard](<#ActionCard.SetBtnTitle>)
  - [func \(ac \*ActionCard\) SetBtnUrl\(url string\) \*ActionCard](<#ActionCard.SetBtnUrl>)
  - [func \(ac \*ActionCard\) SetBtns\(btns \[\]\*ActionCardBtnBody\) \*ActionCard](<#ActionCard.SetBtns>)
  - [func \(ac \*ActionCard\) SetText\(text string\) \*ActionCard](<#ActionCard.SetText>)
  - [func \(ac \*ActionCard\) SetTitle\(title string\) \*ActionCard](<#ActionCard.SetTitle>)
- [type ActionCardBody](<#ActionCardBody>)
- [type ActionCardBtnBody](<#ActionCardBtnBody>)
  - [func NewActionCardBtn\(\) \*ActionCardBtnBody](<#NewActionCardBtn>)
  - [func \(acbb \*ActionCardBtnBody\) SetTitle\(text string\) \*ActionCardBtnBody](<#ActionCardBtnBody.SetTitle>)
  - [func \(acbb \*ActionCardBtnBody\) SetUrl\(url string\) \*ActionCardBtnBody](<#ActionCardBtnBody.SetUrl>)
- [type At](<#At>)
  - [func \(at \*At\) SetAtMobiles\(mobiles \[\]string\) \*At](<#At.SetAtMobiles>)
  - [func \(at \*At\) SetIsAll\(isAll bool\) \*At](<#At.SetIsAll>)
- [type AtBody](<#AtBody>)
- [type FeedCard](<#FeedCard>)
  - [func NewFeedCard\(\) \*FeedCard](<#NewFeedCard>)
  - [func \(fc \*FeedCard\) AddLink\(link \*FeedCardLinkBody\) \*FeedCard](<#FeedCard.AddLink>)
  - [func \(fc \*FeedCard\) SetLinks\(links \[\]\*FeedCardLinkBody\) \*FeedCard](<#FeedCard.SetLinks>)
- [type FeedCardBody](<#FeedCardBody>)
- [type FeedCardLinkBody](<#FeedCardLinkBody>)
  - [func NewFeedCardLink\(\) \*FeedCardLinkBody](<#NewFeedCardLink>)
  - [func \(fclb \*FeedCardLinkBody\) SetPic\(pic string\) \*FeedCardLinkBody](<#FeedCardLinkBody.SetPic>)
  - [func \(fclb \*FeedCardLinkBody\) SetTitle\(text string\) \*FeedCardLinkBody](<#FeedCardLinkBody.SetTitle>)
  - [func \(fclb \*FeedCardLinkBody\) SetUrl\(url string\) \*FeedCardLinkBody](<#FeedCardLinkBody.SetUrl>)
- [type IMessage](<#IMessage>)
- [type Link](<#Link>)
  - [func NewLink\(\) \*Link](<#NewLink>)
  - [func \(l \*Link\) SetPic\(pic string\) \*Link](<#Link.SetPic>)
  - [func \(l \*Link\) SetText\(text string\) \*Link](<#Link.SetText>)
  - [func \(l \*Link\) SetTitle\(title string\) \*Link](<#Link.SetTitle>)
  - [func \(l \*Link\) SetUrl\(url string\) \*Link](<#Link.SetUrl>)
- [type LinkBody](<#LinkBody>)
- [type Markdown](<#Markdown>)
  - [func NewMarkdown\(\) \*Markdown](<#NewMarkdown>)
  - [func \(m \*Markdown\) SetText\(text string\) \*Markdown](<#Markdown.SetText>)
  - [func \(m \*Markdown\) SetTitle\(title string\) \*Markdown](<#Markdown.SetTitle>)
- [type MarkdownBody](<#MarkdownBody>)
- [type Message](<#Message>)
  - [func \(m \*Message\) GetType\(\) string](<#Message.GetType>)
  - [func \(m \*Message\) SetType\(t string\) \*Message](<#Message.SetType>)
- [type Text](<#Text>)
  - [func NewText\(\) \*Text](<#NewText>)
  - [func \(t \*Text\) SetContent\(content string\) \*Text](<#Text.SetContent>)
- [type TextBody](<#TextBody>)


## Constants

<a name="BtnOrientationVertical"></a>

```go
const (
    BtnOrientationVertical   = "0"
    BtnOrientationHorizontal = "1"
)
```

<a name="MaxFeedCardLinks"></a>

```go
const MaxFeedCardLinks = 10
```

<a name="ActionCard"></a>
## type [ActionCard](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L8-L11>)



```go
type ActionCard struct {
    Message
    ActionCardBody *ActionCardBody `json:"actionCard"`
}
```

<a name="NewActionCard"></a>
### func [NewActionCard](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L13>)

```go
func NewActionCard() *ActionCard
```



<a name="ActionCard.AddBtn"></a>
### func \(\*ActionCard\) [AddBtn](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L80>)

```go
func (ac *ActionCard) AddBtn(btn *ActionCardBtnBody) *ActionCard
```



<a name="ActionCard.SetBtnOrientation"></a>
### func \(\*ActionCard\) [SetBtnOrientation](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L41>)

```go
func (ac *ActionCard) SetBtnOrientation(orientation string) *ActionCard
```

0\-按钮竖直排列，1\-按钮横向排列

<a name="ActionCard.SetBtnTitle"></a>
### func \(\*ActionCard\) [SetBtnTitle](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L51>)

```go
func (ac *ActionCard) SetBtnTitle(title string) *ActionCard
```

单个按钮的标题。\(设置此项和singleURL后btns无效\)

<a name="ActionCard.SetBtnUrl"></a>
### func \(\*ActionCard\) [SetBtnUrl](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L61>)

```go
func (ac *ActionCard) SetBtnUrl(url string) *ActionCard
```

点击singleTitle按钮触发的URL

<a name="ActionCard.SetBtns"></a>
### func \(\*ActionCard\) [SetBtns](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L71>)

```go
func (ac *ActionCard) SetBtns(btns []*ActionCardBtnBody) *ActionCard
```

按钮组

<a name="ActionCard.SetText"></a>
### func \(\*ActionCard\) [SetText](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L31>)

```go
func (ac *ActionCard) SetText(text string) *ActionCard
```

markdown格式的消息

<a name="ActionCard.SetTitle"></a>
### func \(\*ActionCard\) [SetTitle](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L21>)

```go
func (ac *ActionCard) SetTitle(title string) *ActionCard
```

首屏会话透出的展示内容

<a name="ActionCardBody"></a>
## type [ActionCardBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L95-L102>)



```go
type ActionCardBody struct {
    Title          string               `json:"title"`
    Text           string               `json:"text"`
    BtnOrientation string               `json:"btnOrientation,omitempty"`
    BtnTitle       string               `json:"singleTitle,omitempty"`
    BtnURL         string               `json:"singleURL,omitempty"`
    BtnsBody       []*ActionCardBtnBody `json:"btns,omitempty"`
}
```

<a name="ActionCardBtnBody"></a>
## type [ActionCardBtnBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L104-L107>)



```go
type ActionCardBtnBody struct {
    Title string `json:"title"`
    Url   string `json:"actionURL"`
}
```

<a name="NewActionCardBtn"></a>
### func [NewActionCardBtn](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L109>)

```go
func NewActionCardBtn() *ActionCardBtnBody
```



<a name="ActionCardBtnBody.SetTitle"></a>
### func \(\*ActionCardBtnBody\) [SetTitle](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L114>)

```go
func (acbb *ActionCardBtnBody) SetTitle(text string) *ActionCardBtnBody
```

按钮标题

<a name="ActionCardBtnBody.SetUrl"></a>
### func \(\*ActionCardBtnBody\) [SetUrl](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/action_card.go#L121>)

```go
func (acbb *ActionCardBtnBody) SetUrl(url string) *ActionCardBtnBody
```

点击按钮触发的URL

<a name="At"></a>
## type [At](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/at.go#L3-L5>)



```go
type At struct {
    AtBody *AtBody `json:"at,omitempty"`
}
```

<a name="At.SetAtMobiles"></a>
### func \(\*At\) [SetAtMobiles](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/at.go#L8>)

```go
func (at *At) SetAtMobiles(mobiles []string) *At
```

被@人的手机号（在content里添加@人的手机号）

<a name="At.SetIsAll"></a>
### func \(\*At\) [SetIsAll](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/at.go#L18>)

```go
func (at *At) SetIsAll(isAll bool) *At
```

是否@所有人

<a name="AtBody"></a>
## type [AtBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/at.go#L36-L39>)



```go
type AtBody struct {
    Mobiles []string `json:"atMobiles,omitempty"`
    IsAll   bool     `json:"isAtAll,omitempty"`
}
```

<a name="FeedCard"></a>
## type [FeedCard](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L5-L8>)



```go
type FeedCard struct {
    Message
    FeedCardBody *FeedCardBody `json:"feedCard"`
}
```

<a name="NewFeedCard"></a>
### func [NewFeedCard](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L10>)

```go
func NewFeedCard() *FeedCard
```



<a name="FeedCard.AddLink"></a>
### func \(\*FeedCard\) [AddLink](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L31>)

```go
func (fc *FeedCard) AddLink(link *FeedCardLinkBody) *FeedCard
```



<a name="FeedCard.SetLinks"></a>
### func \(\*FeedCard\) [SetLinks](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L17>)

```go
func (fc *FeedCard) SetLinks(links []*FeedCardLinkBody) *FeedCard
```



<a name="FeedCardBody"></a>
## type [FeedCardBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L56-L58>)



```go
type FeedCardBody struct {
    Links []*FeedCardLinkBody `json:"links"`
}
```

<a name="FeedCardLinkBody"></a>
## type [FeedCardLinkBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L60-L64>)



```go
type FeedCardLinkBody struct {
    Title string `json:"title"`
    Pic   string `json:"picURL"`
    Url   string `json:"messageURL"`
}
```

<a name="NewFeedCardLink"></a>
### func [NewFeedCardLink](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L66>)

```go
func NewFeedCardLink() *FeedCardLinkBody
```



<a name="FeedCardLinkBody.SetPic"></a>
### func \(\*FeedCardLinkBody\) [SetPic](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L78>)

```go
func (fclb *FeedCardLinkBody) SetPic(pic string) *FeedCardLinkBody
```

单条信息后面图片的URL

<a name="FeedCardLinkBody.SetTitle"></a>
### func \(\*FeedCardLinkBody\) [SetTitle](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L71>)

```go
func (fclb *FeedCardLinkBody) SetTitle(text string) *FeedCardLinkBody
```

单条信息文本

<a name="FeedCardLinkBody.SetUrl"></a>
### func \(\*FeedCardLinkBody\) [SetUrl](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/feed_card.go#L85>)

```go
func (fclb *FeedCardLinkBody) SetUrl(url string) *FeedCardLinkBody
```

点击单条信息到跳转链接

<a name="IMessage"></a>
## type [IMessage](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/message.go#L3-L5>)



```go
type IMessage interface {
    GetType() string
}
```

<a name="Link"></a>
## type [Link](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/link.go#L3-L6>)



```go
type Link struct {
    Message
    LinkBody *LinkBody `json:"link"`
}
```

<a name="NewLink"></a>
### func [NewLink](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/link.go#L8>)

```go
func NewLink() *Link
```



<a name="Link.SetPic"></a>
### func \(\*Link\) [SetPic](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/link.go#L36>)

```go
func (l *Link) SetPic(pic string) *Link
```

图片URL

<a name="Link.SetText"></a>
### func \(\*Link\) [SetText](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/link.go#L16>)

```go
func (l *Link) SetText(text string) *Link
```

消息内容。如果太长只会部分展示

<a name="Link.SetTitle"></a>
### func \(\*Link\) [SetTitle](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/link.go#L26>)

```go
func (l *Link) SetTitle(title string) *Link
```

消息标题

<a name="Link.SetUrl"></a>
### func \(\*Link\) [SetUrl](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/link.go#L46>)

```go
func (l *Link) SetUrl(url string) *Link
```

点击消息跳转的URL

<a name="LinkBody"></a>
## type [LinkBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/link.go#L61-L66>)



```go
type LinkBody struct {
    Text  string `json:"text"`
    Title string `json:"title"`
    Pic   string `json:"picUrl"`
    Url   string `json:"messageUrl"`
}
```

<a name="Markdown"></a>
## type [Markdown](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/markdown.go#L3-L7>)



```go
type Markdown struct {
    Message
    At
    MarkdownBody *MarkdownBody `json:"markdown"`
}
```

<a name="NewMarkdown"></a>
### func [NewMarkdown](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/markdown.go#L9>)

```go
func NewMarkdown() *Markdown
```



<a name="Markdown.SetText"></a>
### func \(\*Markdown\) [SetText](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/markdown.go#L17>)

```go
func (m *Markdown) SetText(text string) *Markdown
```

markdown格式的消息

<a name="Markdown.SetTitle"></a>
### func \(\*Markdown\) [SetTitle](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/markdown.go#L27>)

```go
func (m *Markdown) SetTitle(title string) *Markdown
```

首屏会话透出的展示内容

<a name="MarkdownBody"></a>
## type [MarkdownBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/markdown.go#L42-L45>)



```go
type MarkdownBody struct {
    Title string `json:"title"`
    Text  string `json:"text"`
}
```

<a name="Message"></a>
## type [Message](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/message.go#L7-L9>)



```go
type Message struct {
    Type string `json:"msgtype"`
}
```

<a name="Message.GetType"></a>
### func \(\*Message\) [GetType](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/message.go#L11>)

```go
func (m *Message) GetType() string
```



<a name="Message.SetType"></a>
### func \(\*Message\) [SetType](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/message.go#L15>)

```go
func (m *Message) SetType(t string) *Message
```



<a name="Text"></a>
## type [Text](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/text.go#L3-L7>)



```go
type Text struct {
    Message
    At
    TextBody *TextBody `json:"text"`
}
```

<a name="NewText"></a>
### func [NewText](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/text.go#L9>)

```go
func NewText() *Text
```



<a name="Text.SetContent"></a>
### func \(\*Text\) [SetContent](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/text.go#L17>)

```go
func (t *Text) SetContent(content string) *Text
```

消息内容

<a name="TextBody"></a>
## type [TextBody](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/message/text.go#L32-L34>)



```go
type TextBody struct {
    Content string `json:"content"`
}
```

# response

```go
import "github.com/alswl/dingmark/third_party/go-ding-robot/response"
```

## Index

- [type Response](<#Response>)
  - [func \(r Response\) GetCode\(\) int](<#Response.GetCode>)
  - [func \(r Response\) GetMessage\(\) string](<#Response.GetMessage>)
  - [func \(r Response\) IsSuccess\(\) bool](<#Response.IsSuccess>)


<a name="Response"></a>
## type [Response](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/response/response.go#L3-L9>)



```go
type Response struct {
    Code    int    `json:"errcode"`
    Message string `json:"errmsg"`
    Status  int    `json:"status"`
    Punish  string `json:"punish"`
    Wait    int    `json:"wait"`
}
```

<a name="Response.GetCode"></a>
### func \(Response\) [GetCode](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/response/response.go#L15>)

```go
func (r Response) GetCode() int
```



<a name="Response.GetMessage"></a>
### func \(Response\) [GetMessage](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/response/response.go#L19>)

```go
func (r Response) GetMessage() string
```



<a name="Response.IsSuccess"></a>
### func \(Response\) [IsSuccess](<https://github.com/alswl/dingmark/blob/master/third_party/go-ding-robot/response/response.go#L11>)

```go
func (r Response) IsSuccess() bool
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
